{% import "macros.html" as macros %}
{% import "learning/resources/type_macros.html" as r_macros %}
{% set permitir_docente = docente_asignado(id_curso=curso.codigo) %}
{% set permitir_moderador = moderador_asignado(id_curso=curso.codigo) %}
{% set permitir_estudiante = estudiante_asignado(id_curso=curso.codigo) %}
{% set permitir_editar = current_user.tipo == "admin" or permitir_docente %}

<!doctype html>
<html lang="es" class="h-100">

<head>

    {{ macros.headertags() }}
    <title>{{ curso.codigo | upper }} - {{ curso.nombre | title }}</title>

    {{ macros.local_style() }}

</head>

<body>

    {{ macros.navbar() }}

    <main>

      {{ macros.notify() }}

      <div class="container px-0 py-3" id="icon-grid">
        <h4 class="pb-2 border-bottom">
            <a class="link-dark" href="{{ url_for("curso", course_code=recurso.curso) }}">
                <i class="bi bi-arrow-left-short" aria-hidden="true"></i><i class="bi bi-journal-bookmark-fill" aria-hidden="true"></i>
            </a>
            {{ seccion.nombre }} / {{ recurso.nombre }}
        </h4>

        <div class="row">
          
          <div class="col-sm-8">

          </div>

          <div class="col-sm-4">
            <h2 class="h6 pt-4 pb-3 mb-4 border-bottom">Contenido del Curso</h2>
            <nav class="small" id="toc">
              <ul class="list-unstyled">
                {% for s in secciones %}
                <li>
                  <button class="btn d-inline-flex align-items-center collapsed border-0" data-bs-toggle="collapse" aria-expanded="false" data-bs-target="#contents-collapse-{{s.codigo}}" aria-controls="contents-collapse">
                    <strong>Secci√≥n {{s.indice}}:</strong>  {{ s.nombre }}
                  </button>
                  <ul class="list-unstyled ps-3 collapse" id="contents-collapse-{{s.codigo}}">
                    {% for r in recursos %}
                    {% if r.seccion == s.codigo %}
                    <li>
                      <a class="d-inline-flex align-items-center link-dark rounded text-decoration-none" href="{{ url_for("pagina_recurso", curso_id=r.curso, codigo=r.codigo, resource_type=r.tipo) }}">
                      {{ r.nombre | capitalize }}
                      </a>
                    </li>
                    {% endif %}
                    {% endfor %}
                  </ul>
                </li>
                {% endfor %}
              </ul>
            </nav>
          </div>

        </div>
        
        {{ r_macros.nav_footer() }}
    </div>

    </main>

</body>

</html>
