{% set current_theme = current_theme() %} {% from "macros/form_buttons.j2" import render_form_buttons %}
<!doctype html>
<html lang="{{ get_locale() }}" class="h-100">
    <head>
        {{ current_theme.headertags() }}

        <title>{{ _("Configuración de Pagos con PayPal") }}</title>

        {{ current_theme.local_style() }}
        <!-- Custom styles for this template -->
        <link href="{{ url_for('static', filename='css/form-validation') }}" rel="stylesheet" />
    </head>

    <body>
        {{ current_theme.navbar() }}

        <main>
            {{ current_theme.notify() }} {% from "macros/demo_banner.j2" import demo_mode_banner %} {{ demo_mode_banner() }}

            <div class="container px-4 py-5" id="icon-grid">
                <h4 class="pb-2 border-bottom">{{ _("Configuración de pagos con PayPal") }}</h4>
                <form method="post">
                    {{ form.csrf_token }}

                    <div class="row g-3">
                        <div class="col-12">
                            <h5>{{ _("Configuración General") }}</h5>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-check">
                                {{ form.habilitado(class="form-check-input") }}
                                <label for="habilitado" class="form-check-label">
                                    {{ _("Habilitar PayPal en el sitio web") }}
                                </label>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-check">
                                {{ form.sandbox(class="form-check-input") }}
                                <label for="sandbox" class="form-check-label">
                                    {{ _("Usar modo sandbox (desarrollo)") }}
                                </label>
                            </div>
                        </div>

                        <div class="col-12">
                            <hr />
                            <h5>{{ _("Configuración de Producción") }}</h5>
                            <p class="text-muted small">{{ _("Configure las credenciales de PayPal para producción.") }}</p>
                        </div>

                        <div class="col-sm-6">
                            <label for="paypal_id" class="form-label">{{ _("Client ID (Producción)") }}</label>
                            {{ form.paypal_id(class="form-control", placeholder=_("Ingrese el Client ID de producción")) }}
                        </div>

                        <div class="col-sm-6">
                            <label for="paypal_secret" class="form-label">{{ _("Client Secret (Producción)") }}</label>
                            {{ form.paypal_secret(class="form-control", placeholder=_("Ingrese el Client Secret de
                            producción")) }}
                            <div class="form-text">{{ _("Deje en blanco para mantener el valor actual.") }}</div>
                        </div>

                        <div class="col-12">
                            <hr />
                            <h5>{{ _("Configuración de Sandbox") }}</h5>
                            <p class="text-muted small">
                                {{ _("Configure las credenciales de PayPal para pruebas en sandbox.") }}
                            </p>
                        </div>

                        <div class="col-sm-6">
                            <label for="paypal_sandbox" class="form-label">{{ _("Client ID (Sandbox)") }}</label>
                            {{ form.paypal_sandbox(class="form-control", placeholder=_("Ingrese el Client ID de sandbox")) }}
                        </div>

                        <div class="col-sm-6">
                            <label for="paypal_sandbox_secret" class="form-label">{{ _("Client Secret (Sandbox)") }}</label>
                            {{ form.paypal_sandbox_secret(class="form-control", placeholder=_("Ingrese el Client Secret de
                            sandbox")) }}
                            <div class="form-text">{{ _("Deje en blanco para mantener el valor actual.") }}</div>
                        </div>

                        <div class="col-12">
                            <hr />
                            <div class="alert alert-info">
                                <h6>{{ _("Información importante:") }}</h6>
                                <ul class="mb-0">
                                    <li>
                                        {{ _("Obtenga sus credenciales de PayPal desde") }}
                                        <a href="https://developer.paypal.com" target="_blank">PayPal Developer Dashboard</a>
                                    </li>
                                    <li>{{ _("Use el modo sandbox para pruebas y desarrollo") }}</li>
                                    <li>{{ _("Los secretos se almacenan de forma cifrada en la base de datos") }}</li>
                                    <li>{{ _("Asegúrese de configurar las URLs de retorno correctamente en PayPal") }}</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    {{ render_form_buttons(_("Actualizar Configuración"), url_for('admin_profile.pagina_admin')) }}
                </form>
            </div>
        </main>
    </body>
</html>
